{% extends 'module_details_common.html' %}

{% block module_breadcrumb %}
<li class="is-active"><a href="/modules/{{ namespace.name }}/{{ module.name }}/{{ module_provider.name }}">{{ module_provider.name }}</a></li>
{% endblock %}

{% block main_details %}

    {% if module_version %}
    <section>
        Version
        <div class="select is-small">
            <select autocomplete="off" onchange="selectVersion(event);">
                {% for module_version_itx in module_provider.get_versions(include_beta=False) %}
                <option
                        value="{{ module_version_itx.get_view_url() }}"
                        {% if module_version_itx.version == module_version.version %}selected{% endif %}
                        >
                    {{ module_version_itx.version }}{% if module_version_itx.version == module_provider.get_latest_version().version %} (latest){% endif %}
                </option>
                {% endfor %}
            </select>
        </div>
    </section>
    {% endif %}

    <p id="module-title" class="title">
        {{ module.name }}
    </p>
    <p class="subtitle">
        Provider: {{ module_provider.name }}
    </p>

    {% if module_version %}

        {% if not module_version.published %}
        <p class="subtitle">
            <b>WARNING:</b> This version of the module is not published.
        </p>
        {% endif %}

        <p class="subtitle">
            {% if module_version.description %}{{ module_version.description }}{% endif %}
        </p>
        <p>Published {{ module_version.publish_date_display }} by <a href="/modules/{{ namespace.name }}">{{ namespace.name }}</a></p>
        <p>{% if module_version.owner %}Module managed by {{ module_version.owner }}{% endif %}</p>
        <p>{% if module_version.get_source_browse_url() %}Source Code: <a href="{{ module_version.get_source_browse_url() }}">{{ module_version.get_source_browse_url() }}</a>{% endif %}</p>

        <br />

        {% if module_version.is_submodule %}
            <button>Back to parent</button>
        {% else %}

            {% if module_version.get_submodules() %}
            <section>
                <div class="select is-small">
                    <select autocomplete="off" onchange="selectSubmodule(event);">
                        <option value="none">Select submodule</option>
                        {% for submodule in module_version.get_submodules() %}
                        <option value="{{ submodule.get_view_url() }}">{{ submodule.path }}</option>
                        {% endfor %}
                    </select>
                </div>
            </section>
            {% endif %}

            <br />
            {% if module_version.get_examples() %}
            <section>
                <div class="select is-small">
                    <select autocomplete="off" onchange="selectSubmodule(event);">
                        <option value="none">Select example</option>
                        {% for example in module_version.get_examples() %}
                        <option value="{{ example.get_view_url() }}">{{ example.path }}</option>
                        {% endfor %}
                    </select>
                </div>
            </section>
            {% endif %}
        {% endif %}

    {% else %}
    <p>There are no published versions of this module.</p>
    {% endif %}

    <br />
    <br />

{% endblock %}